{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.12.0/.schema/devbox.schema.json",
  "packages": [
    "bashInteractive@latest",
    "erlang_26@latest",
    "rebar3@latest",
    "erlfmt@latest",
    "imagemagick@latest",
    "ffmpeg@latest",
    "postgresql@latest",
    "gettext@latest",
    "libiconv@latest",
    "inotify-tools@latest",
    "python310Packages.pip@latest",
    "libcap@latest",
    "python@3.10",
    "glibcLocales@latest",
    "elvis-erlang@latest",
    "erlang-ls@latest"
  ],
  "env": {
    "ZOTONIC_CONFIG_DIR": "${DEVBOX_PROJECT_ROOT}/.zotonic/config",
    "ZOTONIC_SECURITY_DIR": "${DEVBOX_PROJECT_ROOT}/.zotonic/security",
    "ZOTONIC_DATA_DIR": "${DEVBOX_PROJECT_ROOT}/.zotonic/data",
    "ZOTONIC_LOG_DIR": "${DEVBOX_PROJECT_ROOT}/.zotonic/log"
  },
  "shell": {
    "init_hook": [
      "export PATH=${DEVBOX_PROJECT_ROOT}/bin:$PATH",
      "mkdir -p $ZOTONIC_CONFIG_DIR",
      "mkdir -p $ZOTONIC_SECURITY_DIR",
      "mkdir -p $ZOTONIC_DATA_DIR",
      "mkdir -p $ZOTONIC_LOG_DIR"
    ],
    "scripts": {
      "prepush": "elvis rock && make && zotonic runtests && make xref && make dialyzer"
    }
  }
}
